
{% extends 'pydb4/base.html' %} 
{% load static %} 


{% block content %} 


{% if product|is_iterable %}


{% for p in product %}

<h1>{{ p.name }}</h1>
<br />
<ul>
  <li>Size: {{ p.size }}</li>
  <li>Reference ID: {{p.reference_id}}</li>
  <li>Expiration Date: {{p.expiry_date.date}}</li>
  <li>Quantity on hand: {{p.quantity_on_hand}}</li>
  {% if p.is_purchased %}
  <li>Item Status: Purchased</li>
  {% else %}
  <li>Item Status: Consignment</li>
  {% endif %} 
  <li>
    <a href="{% url 'update_product' product_id=p.id %}">Update product</a>
  </li>
    <li>Last modified: {{p.last_modified}}</li>
  {% if records %}
  <button id="history" class="hist tested next"> History of Quantity changes:</button>
  <div id="modTable">
  <table>
<thead>
    <tr>
        <th style="border: 1px solid #333;">Date of Modification</th>
        <th style="border: 1px solid #333;">Old Value</th>
        <th style="border: 1px solid #333;">New Value</th>
    </tr>
</thead>
<tbody>

    {% for r in records %}
        <tr>
            <td style="border: 1px solid #333; width: 250px;">{{r.modified_date|date:"D M d Y"}} at {{ r.modified_date|time:"H:i a e" }}</td>
            <td style="border: 1px solid #333;">{{ r.old_value }}</td>
            <td style="border: 1px solid #333;">{{ r.new_value }}</td>
        </tr>
    <!-- <hr style="border: 1px dashed black" /> -->
    {% endfor %}

  {% endif %}
</ul>
</tbody>
</table>
</div>
<script src="{% static 'pydb4/script.js' %}"></script>
{% endfor %}

 {% else %} {% if submitted %}
<center>Your Product was added successfully!</center>
<h1>{{ product.name }}</h1>
<ul>
  <li>Size: {{ product.size }}</li>
  <li>Reference ID: {{product.reference_id}}</li>
  <li>Expiration Date: {{product.expiry_date.date}}</li>
  <li>Quantity on hand: {{product.quantity_on_hand}}</li>
  {% if product.is_purchased %}
  <li>Item Status: Purchased</li>
  {% else %}
  <li>Item Status: Consignment</li>
  {% endif %}
  <li>Last modified: {{product.last_modified}}</li>
  <li>
    <a href="{% url 'update_product' product_id=product.id %}"
      >Update product</a
    >
  </li>
</ul>

{% elif updated %}
<center>Your Product was updated successfully!</center>

<h1>{{ form.name }}</h1>
<ul>
  <li>Size: {{ form.size }}</li>
  <li>Reference ID: {{form.reference_id}}</li>
  <li>Expiration Date: {{form.expiry_date.date}}</li>
  <li>Quantity on hand: {{form.quantity_on_hand}}</li>
  {% if form.is_purchased %}
  <li>Item Status: Purchased</li>
  {% else %}
  <li>Item Status: Consignment</li>
  {% endif %}
  <li>Last modified: {{form.last_modified}}</li>
</ul>
{% endif %} {% endif %}
<br><br>
<button class="btn btn-secondary" onclick="goBack()">Go Back</button>

{% endblock %}
